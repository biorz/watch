!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("watcher",[],e):"object"==typeof exports?exports.watcher=e():t.watcher=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=o.default,t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(2),c=function(t){return t&&t.__esModule?t:{default:t}}(u),f=n(3),l={interval:1e3/60,list:[]},h=function(t){var e=!1;return function(){var n=arguments;e||(e=!0,setTimeout(function(){t.apply(null,[].slice.call(n)),e=!1},l.interval))}}(function(t){l.list.forEach(function(e){l[e].emit("re",t)})});["scroll","resize","load"].forEach(function(t){addEventListener(t,h)});var a={wrapper:"html",proportion:{dir:1,size:1,select:1,ratio:1},offset:{top:0,right:0,bottom:0,left:0},threshold:0,direction:0,test:function(t){return t}},v={coordinate:[0,0],offset:["offsetTop","offsetLeft"],scrollOffset:["scrollTop","scrollLeft"],scrollLength:["scrollHeight","scrollWidth"],direction:["top","right","bottom","left"],length:["vh","vw"],start:["top","left"],end:["bottom","right"],side:["height","width"]},p=function(t){function e(t,n){var r;i(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if("string"!=typeof t)return o(s);var u=l.list.indexOf(t);return~u?(r=l[l.list[u]],o(s,r)):(l.list.push(t),l[t]=s,s.elements=[].slice.call(document.querySelectorAll(t)),s.options=Object.assign(a,n||{}),s.init(),s)}return r(e,t),s(e,[{key:"init",value:function(){this.current=[],this.views=[],this.offset(),this.threshold(),this.direction(),this.proportion(),this.isHozi=this.options.direction%2,this.isEnd=this.options.direction%3,this.html=document.querySelector("html"),this.preCalculate(),this.onEvent()}},{key:"onEvent",value:function(){var t=this,e=this,n=[];this.on("re",function(e){"scroll"!==e.type&&t.preCalculate(),t.check()}),this.elements.forEach(function(i){t.getParentItera(function(t,i){if(!i)return!1;~n.indexOf(i)||(n.push(i),i.addEventListener("scroll",function(t){e.check()}))},i)})}},{key:"check",value:function(){var t=this;this.views=[],this.elements.forEach(function(e){var n=t.inView(e),i=t.current.indexOf(e),o=n&&!~i,r=!n&&~i;n&&t.views.push(n),o&&t.emit("change enter",e),r&&t.emit("change exit",e)}),this.sortBy(this.views),this.current=this.views.map(function(t){return t.element}),this.emit("check",this.current[0],this.current,this.views),this.current.length?this.emit("has",this.current[0],this.current,this.views):this.emit("none")}},{key:"offset",value:function(){var t=this.options.offset,e={},n=function(t){return"number"==typeof t};["top","right","bottom","left"].forEach(n(t)?function(n){return e[n]=t}:function(i){return e[i]=n(t[i])?t[i]:null}),this.options.offset=e}},{key:"threshold",value:function(){var t=this.options.threshold;this.options.threshold="number"==typeof t&&t>=0&&t<=1?t:null}},{key:"direction",value:function(){var t=this.options.direction,e=void 0;this.options.direction="number"==typeof t?t:~(e=v.direction.indexOf[t])?e:null}},{key:"proportion",value:function(){var t=this.options.proportion;for(var e in t)this.options.proportion[e]="number"==typeof t[e]?t[e]:null}},{key:"preCalculate",value:function(){this.vw=window.innerWidth,this.vh=window.innerHeight,this.vs=this.vw*this.vh,this.vp={top:0,right:this.vw,bottom:this.vh,left:0,width:this.vw,height:this.vh}}},{key:"getParentItera",value:function(t,e){var n=void 0,i=void 0;do{n=(0,f.getScrollParent)(e),i=t(e,n),e=n}while(n&&!1!==i)}},{key:"scroll",value:function(t,e){var n=this;this.select=t,this.scrollTo(t,e),this.one("exit",function(t){return n.select===t&&(n.select=null,!0)})}},{key:"scrollTo",value:function(t,e){var n=this;this.isScrollTo=!0;var i=function(){n.isScrollTo=!0,n.check()},o=[],r=t.getBoundingClientRect(),s=void 0,u=void 0,c=this;this.getParentItera(function(t,e){if(!e)return s=c.getOffsetRect(r,c.vp),u=c.getScroll(r,s,c.html),o.push(u),!1;s=e.getBoundingClientRect(),u=c.getScroll(r,s,e),r={top:u.offset[1],left:u.offset[0],width:r.width,height:r.height},o.push(u)},t),o.forEach(function(t){var n=t.element,o=t.dist,r=t.start,s=t.distance,u=t.max;if(!e)return n.scroll(o[0],o[1]),i();[0,1].forEach(function(t){var c=0,l=void 0;l=(0,f.RAF)(function h(){if(n[v.scrollOffset[t]]=f.tween.quad.easeInOut(c,r[1-t],s[1-t],e),(c+=1e3/60)>=e||o[1-t]<=0&&r[1-t]<=0||o[1-t]>=u[1-t]&&r[1-t]>=u[1-t])return i();l=(0,f.RAF)(h)})})})}},{key:"getScroll",value:function(t,e,n){var i=this,o=[],r=[],s=[],u=[],c=[],f=void 0,l=void 0,h=void 0,a=void 0,p=void 0;return[0,1].forEach(function(d){a=v.start[1-d],p=v.side[1-d],f=n[v.scrollLength[1-d]],l=n[v.scrollOffset[1-d]],h=i.isEnd?e[p]-t[p]:0,o[d]=l,c[d]=e[a]+h,u[d]=t[a]-c[d],r[d]=l+u[d],s[d]=f-e[p],r[d]>s[d]&&(u[d]-=r[d]-s[d],r[d]=s[d],c[d]+=r[d]-s[d])}),{dist:r,offset:c,start:o,distance:u,max:s,element:n}}},{key:"getOffsetRect",value:function(t,e){var n={width:this.options.threshold*t.width,height:this.options.threshold*t.height},i={top:this.options.offset.top+n.height,right:this.options.offset.right+n.width,bottom:this.options.offset.bottom+n.height,left:this.options.offset.left+n.width},o=Object.assign({},e);for(var r in i)o[r]+=i[r];return o}},{key:"sortBy",value:function(t){var e=this,n=this.options.proportion;return t.sort(function(t,i){var o=e.isHozi,r=e.isEnd,s=function(t){return(r?t[v.end[o]]:e[v.length[o]]-t[v.start[o]])/e[v.length[o]]},u=function(t){var i=t.element===e.select?n.select:0;return s(t)*n.dir+t.size/e.vs*n.size+t.size/t.rawSize*n.ratio+i};return u(t)>u(i)?-1:1})}},{key:"inView",value:function(t){var e=t.getBoundingClientRect(),n=void 0,i=this;if(this.getParentItera(function(t,o){return o?(n=o.getBoundingClientRect(),0!==(e=(0,f.getOffset)(e,n))):(n=i.getOffsetRect(e,i.vp),e=(0,f.getOffset)(e,n),!1)},t),e){var o=t.getBoundingClientRect();e.rawSize=o.width*o.height,e.size=e.width*e.height,e.element=t}return e}}]),e}(c.default);p.setInterval=function(t){l.interval=t},e.default=function(t,e){return new p(t,e)},t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){i(this,t),this._events={}}return o(t,[{key:"on",value:function(t,e){return this._events[t]||(this._events[t]=[]),this._events[t].push(e),this}},{key:"one",value:function(t,e){this._events[t]||(this._events[t]=[]);var n=this,i=function i(){var o=[].slice.call(arguments);!0===e.apply(n,o)&&n.remove(t,i)};return this.on(t,i),this}},{key:"emit",value:function(t){var e=this,n=t.split(" "),i=[].slice.call(arguments,1);n.forEach(function(t){e._events[t]&&e._events[t].forEach(function(t){t.apply(e,i)})})}},{key:"remove",value:function(t,e){var n=this;this._events[t]&&this._events[t].forEach(function(i,o){if(e===i)return n._events[t].splice(o,1),!1})}}]),t}();e.default=r,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.RAF=window.requestAnimationFrame||function(t){setTimeout(t,1e3/60)},e.tween={linear:function(t,e,n,i){return t/i*n+e},quad:{easeIn:function(t,e,n,i){return n*(t/=i)*t+e},easeOut:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}}},e.getScrollParent=function(){var t=/(auto|scroll)/,e=["overflow","overflow-x","overflow-y"],n=void 0,i=void 0;return function o(r){try{n=getComputedStyle(i=r.parentNode,null)}catch(t){return null}return e.some(function(e){return t.test(n.getPropertyValue(e))})?i:o(i)}}(),e.getOffset=function(t,e){var n=Math.min(t.right,e.right)-Math.max(t.left,e.left),i=Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top);return n>0&&i>0?(t.width=n,t.height=i,t):0}}])});